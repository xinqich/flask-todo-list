{% extends 'base.html' %}
{% block title %}
	Edit agent
{% endblock %}
{% block content %}
    <h1 style="margin-bottom: 20px">Edit agent info: {{ agent.codename }}</h1>
    <form action="/edit/{{ agent.id }}" method="post" class="agent-form">
        <div class="field">
            <label for="codename">Agent codename:</label>
            <input type="text" id="codename" name="codename" value="{{ agent.codename }}">
        </div>
        <div class="field">
            <label for="phone">Phone number:</label>
            <input type="tel" id="phone" name="phone" value="{{ agent.phone }}">
        </div>
        <div class="field">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ agent.email }}">
        </div>
        <div class="field">
            <label for="access">Access level:</label>
            <input type="number" id="access" name="access" value="{{ agent.access }}">
        </div>
        <button type="submit">Submit</button>
    </form>
{% endblock %}

{% block extrajs %}
    <script>
        let access = document.getElementById('access')
        let form = document.querySelector('form')
        form.addEventListener('submit', function (event) {
            event.preventDefault()
            if (![0, 1, 2, 3].includes(parseInt(access.value))) {
                alert('Invalid access level. Please select a number from 0 to 3')
                return
            }
            this.submit()
        })
    </script>
{% endblock %}